!function (a) { function b(b) { var c = a(this), d = null, e = [], f = null, g = null, h = a.extend({ rowSelector: "> li", submenuSelector: "*", submenuDirection: "right", tolerance: 75, enter: a.noop, exit: a.noop, activate: a.noop, deactivate: a.noop, exitMenu: a.noop }, b), i = 3, j = 300, k = function (a) { e.push({ x: a.pageX, y: a.pageY }), e.length > i && e.shift() }, l = function () { g && clearTimeout(g), h.exitMenu(this) && (d && h.deactivate(d), d = null) }, m = function () { g && clearTimeout(g), h.enter(this), q(this) }, n = function () { h.exit(this) }, o = function () { p(this) }, p = function (a) { a != d && (d && h.deactivate(d), h.activate(a), d = a) }, q = function (a) { var b = r(); b ? g = setTimeout(function () { q(a) }, b) : p(a) }, r = function () { function o(a, b) { return (b.y - a.y) / (b.x - a.x) } if (!d || !a(d).is(h.submenuSelector)) return 0; var b = c.offset(), g = { x: b.left, y: b.top - h.tolerance }, i = { x: b.left + c.outerWidth(), y: g.y }, k = { x: b.left, y: b.top + c.outerHeight() + h.tolerance }, l = { x: b.left + c.outerWidth(), y: k.y }, m = e[e.length - 1], n = e[0]; if (!m) return 0; if (n || (n = m), n.x < b.left || n.x > l.x || n.y < b.top || n.y > l.y) return 0; if (f && m.x == f.x && m.y == f.y) return 0; var p = i, q = l; "left" == h.submenuDirection ? (p = k, q = g) : "below" == h.submenuDirection ? (p = l, q = k) : "above" == h.submenuDirection && (p = g, q = i); var r = o(m, p), s = o(m, q), t = o(n, p), u = o(n, q); return r < t && s > u ? (f = m, j) : (f = null, 0) }; c.mouseleave(l).find(h.rowSelector).mouseenter(m).mouseleave(n).click(o), a(document).mousemove(k) } a.fn.menuAim = function (a) { return this.each(function () { b.call(this, a) }), this } }(jQuery);